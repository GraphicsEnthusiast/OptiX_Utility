optix_wrapper方針

- GAS/IASとPipelineを切り離す。
  異なるPipeline間でGAS/IASを再利用できるようにする。
  - GASのBuildInputのnumSbtRecords, sbtIndexOffsetBuffer, flagsが同じになる必要があるため
    メッシュ中のマテリアルの区別はジオメトリに属するものとする。マテリアルそのものはジオメトリとは切り離される。
- 本来ある自由度は基本的には維持する。
  例: SBT中のレコードはレイタイプ(= optixTrace時のオフセット)ごとに異なる値を持てる。


Material
- OptiX 6と同様にレイタイプごとにHitGroupを登録する。
- OptiX 6とは異なり、マテリアル全体で共通のSBTデータを持つのではなく、レイタイプごとに持つ。
  HitGroupと併せて登録する。HitGroupはパイプラインに属しているためSBTデータはPipelineごとに区別。

GeometryInstance
- GASのBuildInputと一対一対応。
- マテリアル数を設定する。
  マテリアルの区別はパイプラインとは切り離された概念。
  - 各マテリアルごとにジオメトリのフラグを設定する。
- SBTデータを持つことができる。
  持つデータはパイプラインとは切り離すことにする。
  (パイプラインごとに異なるデータとすることも容易か)
- インスタンシング時にマテリアルを切り替えられるように、マテリアルセットの概念を取り入れる。
  実際のMaterialはマテリアルのインデックスだけでなく、マテリアルセットのインデックスを併せて登録する。